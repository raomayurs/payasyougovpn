{
 "Resources": {
  "PayAsYouGoVPNLambdaExecutionRole96C8EF83": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Policies": [
     {
      "PolicyDocument": {
       "Statement": [
        {
         "Action": [
          "logs:CreateLogGroup",
          "logs:CreateLogStream",
          "logs:PutLogEvents"
         ],
         "Effect": "Allow",
         "Resource": "*"
        }
       ],
       "Version": "2012-10-17"
      },
      "PolicyName": "lambdaBasic"
     },
     {
      "PolicyDocument": {
       "Statement": [
        {
         "Action": "s3:*",
         "Effect": "Allow",
         "Resource": "*"
        }
       ],
       "Version": "2012-10-17"
      },
      "PolicyName": "s3Access"
     },
     {
      "PolicyDocument": {
       "Statement": [
        {
         "Action": "ec2:*",
         "Effect": "Allow",
         "Resource": "*"
        }
       ],
       "Version": "2012-10-17"
      },
      "PolicyName": "ec2Access"
     },
     {
      "PolicyDocument": {
       "Statement": [
        {
         "Action": "sts:AssumeRole",
         "Effect": "Allow",
         "Resource": "arn:aws:iam::719694030497:role/EC2AccessRole"
        }
       ],
       "Version": "2012-10-17"
      },
      "PolicyName": "assumeRoleAccess"
     }
    ],
    "RoleName": "PayAsYouGoVPNLambdaExecutionRole"
   },
   "Metadata": {
    "aws:cdk:path": "PayAsYouGoVPNBaseStack/PayAsYouGoVPNServiceStack/PayAsYouGoVPNLambdaExecutionRole/Resource"
   }
  },
  "StartVPNServer09F17244": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-719694030497-eu-west-2",
     "S3Key": "c4fcf1a3ab64829a193e74c22ffc1e525abc767ae1e1335801007c817a05fac3.zip"
    },
    "Role": {
     "Fn::GetAtt": [
      "PayAsYouGoVPNLambdaExecutionRole96C8EF83",
      "Arn"
     ]
    },
    "FunctionName": "StartVPNServer",
    "Handler": "index.startServer",
    "Runtime": "nodejs14.x",
    "Timeout": 120
   },
   "DependsOn": [
    "PayAsYouGoVPNLambdaExecutionRole96C8EF83"
   ],
   "Metadata": {
    "aws:cdk:path": "PayAsYouGoVPNBaseStack/PayAsYouGoVPNServiceStack/StartVPNServer/Resource",
    "aws:asset:path": "asset.c4fcf1a3ab64829a193e74c22ffc1e525abc767ae1e1335801007c817a05fac3.zip",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "StopVPNServerFE11C646": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-719694030497-eu-west-2",
     "S3Key": "c4fcf1a3ab64829a193e74c22ffc1e525abc767ae1e1335801007c817a05fac3.zip"
    },
    "Role": {
     "Fn::GetAtt": [
      "PayAsYouGoVPNLambdaExecutionRole96C8EF83",
      "Arn"
     ]
    },
    "FunctionName": "StopVPNServer",
    "Handler": "index.stopServer",
    "Runtime": "nodejs14.x",
    "Timeout": 120
   },
   "DependsOn": [
    "PayAsYouGoVPNLambdaExecutionRole96C8EF83"
   ],
   "Metadata": {
    "aws:cdk:path": "PayAsYouGoVPNBaseStack/PayAsYouGoVPNServiceStack/StopVPNServer/Resource",
    "aws:asset:path": "asset.c4fcf1a3ab64829a193e74c22ffc1e525abc767ae1e1335801007c817a05fac3.zip",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "StopAllIdleServers7F122012": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-719694030497-eu-west-2",
     "S3Key": "c4fcf1a3ab64829a193e74c22ffc1e525abc767ae1e1335801007c817a05fac3.zip"
    },
    "Role": {
     "Fn::GetAtt": [
      "PayAsYouGoVPNLambdaExecutionRole96C8EF83",
      "Arn"
     ]
    },
    "FunctionName": "StopAllIdleServers",
    "Handler": "index.stopAllIdleServers",
    "Runtime": "nodejs14.x",
    "Timeout": 120
   },
   "DependsOn": [
    "PayAsYouGoVPNLambdaExecutionRole96C8EF83"
   ],
   "Metadata": {
    "aws:cdk:path": "PayAsYouGoVPNBaseStack/PayAsYouGoVPNServiceStack/StopAllIdleServers/Resource",
    "aws:asset:path": "asset.c4fcf1a3ab64829a193e74c22ffc1e525abc767ae1e1335801007c817a05fac3.zip",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "GetServerDetailsE35C5BA7": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-719694030497-eu-west-2",
     "S3Key": "c4fcf1a3ab64829a193e74c22ffc1e525abc767ae1e1335801007c817a05fac3.zip"
    },
    "Role": {
     "Fn::GetAtt": [
      "PayAsYouGoVPNLambdaExecutionRole96C8EF83",
      "Arn"
     ]
    },
    "FunctionName": "GetServerDetails",
    "Handler": "index.getServerDetails",
    "Runtime": "nodejs14.x",
    "Timeout": 120
   },
   "DependsOn": [
    "PayAsYouGoVPNLambdaExecutionRole96C8EF83"
   ],
   "Metadata": {
    "aws:cdk:path": "PayAsYouGoVPNBaseStack/PayAsYouGoVPNServiceStack/GetServerDetails/Resource",
    "aws:asset:path": "asset.c4fcf1a3ab64829a193e74c22ffc1e525abc767ae1e1335801007c817a05fac3.zip",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "GetVPNSessions0CEAB784": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-719694030497-eu-west-2",
     "S3Key": "c4fcf1a3ab64829a193e74c22ffc1e525abc767ae1e1335801007c817a05fac3.zip"
    },
    "Role": {
     "Fn::GetAtt": [
      "PayAsYouGoVPNLambdaExecutionRole96C8EF83",
      "Arn"
     ]
    },
    "FunctionName": "GetVPNSessions",
    "Handler": "index.getVPNSessions",
    "Runtime": "nodejs14.x",
    "Timeout": 120
   },
   "DependsOn": [
    "PayAsYouGoVPNLambdaExecutionRole96C8EF83"
   ],
   "Metadata": {
    "aws:cdk:path": "PayAsYouGoVPNBaseStack/PayAsYouGoVPNServiceStack/GetVPNSessions/Resource",
    "aws:asset:path": "asset.c4fcf1a3ab64829a193e74c22ffc1e525abc767ae1e1335801007c817a05fac3.zip",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "LambdaAccessManagedPolicy47C438D5": {
   "Type": "AWS::IAM::ManagedPolicy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "StartVPNServer09F17244",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "StopVPNServerFE11C646",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "StopAllIdleServers7F122012",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "GetServerDetailsE35C5BA7",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "GetVPNSessions0CEAB784",
          "Arn"
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "Description": "",
    "ManagedPolicyName": "LambdaAccessManagedPolicy",
    "Path": "/"
   },
   "Metadata": {
    "aws:cdk:path": "PayAsYouGoVPNBaseStack/PayAsYouGoVPNServiceStack/LambdaAccessManagedPolicy/Resource"
   }
  },
  "CDKMetadata": {
   "Type": "AWS::CDK::Metadata",
   "Properties": {
    "Analytics": "v2:deflate64:H4sIAAAAAAAA/1WOwQ6CMAyGn8X7qKJEz2LiTWPwAUjZKhmMLaGbxiy8uwPjwdPXfn+Tv1soCtis8MWZVH1mdAPxSuxJ3T3KXqSgjhoHiJUzJE4Pu/CCFltSN2e0fM/2T0zC4NAohHgOVnrt7HzymyfBuxqZyTMcZ6QdyiB78iUyTWKRqb7Vtl0aiV0YZUqsUwQdr5/5HvJD+rtjrbMxWK8HgurLD5TpvkzTAAAA"
   },
   "Metadata": {
    "aws:cdk:path": "PayAsYouGoVPNBaseStack/PayAsYouGoVPNServiceStack/CDKMetadata/Default"
   }
  }
 }
}